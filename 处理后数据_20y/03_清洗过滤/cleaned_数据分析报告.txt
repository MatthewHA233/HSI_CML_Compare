======================================================================
数据筛选与清洗分析报告
======================================================================
生成时间: 2025-11-21 13:06:58

一、输入数据概况
----------------------------------------------------------------------
输入文件: raw_prices.csv
原始股票数: 3,272 只
交易日数: 240 天
日期范围: 2005-01-31 至 2024-12-31
原始数据完整度: 55.67%

二、筛选条件
----------------------------------------------------------------------
1. 缺失率阈值: < 30%
2. 期末价格阈值: ≥ 1.0元 (删除退市/仙股)
3. 数据处理原则: 价格不填充、不Winsorize，所有处理在收益率层面

三、原始数据缺失率分布
----------------------------------------------------------------------
缺失率范围                  股票数         占比
----------------------------------------------------------------------
<10%                   893      27.3%
10-20%                 201       6.1%
20-50%                 589      18.0%
50-90%               1,221      37.3%
>=90%                  368      11.2%

四、筛选结果
----------------------------------------------------------------------
筛选1 - 缺失率筛选:
  保留: 1,280 只
  剔除: 1,992 只

筛选2 - 价格质量筛选:
  保留: 463 只
  剔除: 817 只 (期末价格<1.0元)

最终结果:
  保留股票: 463 只 (14.2%)
  剔除股票: 2,809 只 (85.8%)

五、数据清洗处理
----------------------------------------------------------------------
剩余缺失值: 7,639 个
处理方法: 价格保留NaN，不填充，不Winsorize
说明: 缺失值将在步骤4计算收益率时处理（令收益率=0）
说明: 所有数据处理都在收益率层面进行

六、清洗后数据统计
----------------------------------------------------------------------
股票数: 463 只
交易日数: 240 天
总数据点: 111,120 个

价格统计:
  最小值: 0.01
  最大值: 681.50
  均值: 13.28
  中位数: 4.70
  标准差: 28.91

股票特征统计:
  平均价格范围: 0.24 - 240.29
  价格标准差范围: 0.16 - 163.20
  变异系数范围: 0.15 - 3.16

七、输出文件信息
----------------------------------------------------------------------
文件路径: /Users/maxwellchen/Projects/Personal/python/HSI_CML_Compare/处理后数据_20y/03_清洗过滤/cleaned_prices.csv
文件大小: 0.52 MB
文件格式: CSV (UTF-8 with BOM)
列数: 242 列 (3个info列 + 240个日期列)
行数: 463 行

八、质量检查
----------------------------------------------------------------------
缺失值: 7,639 个 (保留NaN，不填充)
数据完整度: 93.13%
重复股票代码: 0 个
价格异常值处理: 不处理（在收益率层面处理）
日期对齐: 完全对齐

九、说明
----------------------------------------------------------------------
1. 筛选标准: 保留缺失率<30%且期末价格≥1.0元的股票
2. 缺失值处理: 保留NaN不填充，在步骤4计算收益率时处理
3. 价格处理原则: 不填充、不Winsorize，所有处理在收益率层面
4. 数据用途: 本数据将用于计算收益率、协方差矩阵和构建有效前沿
5. 质量保证: 筛选后股票数据质量较高，适合投资组合优化分析

