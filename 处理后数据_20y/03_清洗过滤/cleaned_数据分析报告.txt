======================================================================
数据筛选与清洗分析报告
======================================================================
生成时间: 2025-11-21 00:12:32

一、输入数据概况
----------------------------------------------------------------------
输入文件: raw_prices.csv
原始股票数: 3,272 只
交易日数: 240 天
日期范围: 2005-01-31 至 2024-12-31
原始数据完整度: 55.67%

二、筛选条件
----------------------------------------------------------------------
1. 缺失率阈值: < 20%
2. 期末价格阈值: ≥ 0.05元 (删除退市/仙股)
3. 数据处理原则: 价格不填充、不Winsorize，所有处理在收益率层面

三、原始数据缺失率分布
----------------------------------------------------------------------
缺失率范围                  股票数         占比
----------------------------------------------------------------------
<10%                   893      27.3%
10-20%                 201       6.1%
20-50%                 589      18.0%
50-90%               1,221      37.3%
>=90%                  368      11.2%

四、筛选结果
----------------------------------------------------------------------
筛选1 - 缺失率筛选:
  保留: 1,094 只
  剔除: 2,178 只

筛选2 - 价格质量筛选:
  保留: 970 只
  剔除: 124 只 (期末价格<0.05元)

最终结果:
  保留股票: 970 只 (29.6%)
  剔除股票: 2,302 只 (70.4%)

五、数据清洗处理
----------------------------------------------------------------------
剩余缺失值: 7,986 个
处理方法: 价格保留NaN，不填充，不Winsorize
说明: 缺失值将在步骤4计算收益率时处理（令收益率=0）
说明: 所有数据处理都在收益率层面进行

六、清洗后数据统计
----------------------------------------------------------------------
股票数: 970 只
交易日数: 240 天
总数据点: 232,800 个

价格统计:
  最小值: 0.01
  最大值: 681.50
  均值: 6.16
  中位数: 1.12
  标准差: 20.10

股票特征统计:
  平均价格范围: 0.03 - 240.29
  价格标准差范围: 0.03 - 163.20
  变异系数范围: 0.15 - 4.62

七、输出文件信息
----------------------------------------------------------------------
文件路径: /Users/maxwellchen/Projects/Personal/python/HSI_CML_Compare/处理后数据_20y/03_清洗过滤/cleaned_prices.csv
文件大小: 1.14 MB
文件格式: CSV (UTF-8 with BOM)
列数: 242 列 (3个info列 + 240个日期列)
行数: 970 行

八、质量检查
----------------------------------------------------------------------
缺失值: 0 个 (100%完整)
重复股票代码: 0 个
异常值: 已处理 (Winsorize)
日期对齐: 完全对齐

九、说明
----------------------------------------------------------------------
1. 筛选标准: 保留缺失率<20%的股票，确保数据质量
2. 缺失值处理: 前向填充保持价格连续性，避免引入偏差
3. 极端值处理: Winsorize方法限制极端值影响，保留数据分布特征
4. 数据用途: 本数据将用于计算收益率、协方差矩阵和构建有效前沿
5. 质量保证: 所有股票数据完整，无缺失值，适合进行投资组合优化分析

